# 字典树 trie-tree

## 1 字典树的概念

现在我有一大堆单词，要做一个前缀搜索提示功能。比如我有trigger，try，time三个单词，当我依次输入前缀t、tr、tri，要找到相应的全部单词。

- 怎么做？
- 用什么数据结构存单词？
- 这个数据结构有什么优点？
- 为什么？
- 整个过程中可能会遇到什么问题？

## 2 白板作图，画出字典树的简单结构

现在给你几个单词，trigger，try，time，tired，apple，aply，app，adc，and，请简单画出字典树的结构。

## 3 字典树的简单操作

现在对字典树进行操作：
- 加入american，bitch，cat。
- 删除adc，and，time。
- 修改tired，aply，try。

## 4 功能设计问题

现在有一个前缀搜索功能，字典树数据量极大，不可能完全维护在内存中。
- 怎么持久化？
- 怎么做缓存？
- 同时加入多个单词，怎么保证字段树的正确性？
- 同时修改呢？
- 同时删除呢？

## 5 算法问题

### 5.1 字符串检索

事先将已知的一些字符串（字典）的有关信息保存到trie树里，查找另外一些未知字符串是否出现过或者出现频率。

- 给出N个单词组成的熟词表，以及一篇全用小写英文书写的文章，请你按最早出现的顺序写出所有不在熟词表中的生词。

- 给出一个词典，其中的单词为不良单词。单词均为小写字母。再给出一段文本，文本的每一行也由小写字母构成。判断文本中是否含有任何不良单词。例如，若rob是不良单词，那么文本problem含有不良单词。

- 1000万字符串，其中有些是重复的，需要把重复的全部去掉，保留没有重复的字符串。

### 5.2 文本预测、自动完成、see also、拼写检查

自动补全。

### 5.3 词频统计

统计出现频率。

- 有一个1G大小的一个文件，里面每一行是一个词，词的大小不超过16字节，内存限制大小是1M。返回频数最高的100个词。

- 一个文本文件，大约有一万行，每行一个词，要求统计出其中最频繁出现的前10个词，请给出思想，给出时间复杂度分析。

- 寻找热门查询：搜索引擎会通过日志文件把用户每次检索使用的所有检索串都记录下来，每个查询串的长度为1-255字节。假设目前有一千万个记录，这些查询串的重复度比较高，虽然总数是1千万，但是如果去除重复，不超过3百万个。一个查询串的重复度越高，说明查询它的用户越多，也就越热门。请你统计最热门的10个查询串，要求使用的内存不能超过1G。
    - 请描述你解决这个问题的思路。
    - 请给出主要的处理流程，算法，以及算法的复杂度。

### 5.4 排序

Trie树是一棵多叉树，只要先序遍历整棵树，输出相应的字符串便是按字典序排序的结果。

- 现在有N个互不相同的仅由一个单词构成的英文名，将它们按字典序从小到大排序输出。

### 5.5 字符串最长公共前缀

Trie树利用多个字符串的公共前缀来节省存储空间，当我们把大量字符串存储到一棵trie树上时，我们可以快速得到某些字符串的公共前缀。

- 现在有N个字符串，问两个串的最长公共前缀的长度是多少？

### 6 高级用法

- 压缩Trie树，优化了一定的空间，但是增加维护成本。
- 后缀树。
- 三分字典树。