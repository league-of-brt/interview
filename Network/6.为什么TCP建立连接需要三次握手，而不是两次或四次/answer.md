# 为什么TCP建立连接需要三次握手，而不是两次或四次

参考：https://draveness.me/whys-the-design-tcp-three-way-handshake/

## 1 错误的类比

一问起为什么TCP建立连接需要三次握手，很多人的回答都是这个：

> 1. 你听得到吗？
> 2. 我能听到，你听得到？
> 3. 我也能听到；

翻译过来就是：

> 1. 能收到我的请求吗？
> 2. 可以，能收到我的响应吗？
> 3. 可以，我们可以开始通信了；

![pic](https://brt-1303999354.cos.ap-shanghai.myqcloud.com/QQ%E6%88%AA%E5%9B%BE20210319004336.png)

个人认为，这个回答着重于阐述**客户端和服务端之间的连通性**，经过这么三次握手：

1. 客户端确认了服务端能收到请求。
2. 客户端确认了自己能收到服务端的响应。
3. 服务端确认了自己能收到客户端的请求。
4. 服务端确认了客户端能收到响应。

## 2 什么是TCP连接，TCP连接需要什么？

## 3 为什么两次握手不行？

## 4 为什么需要三次握手？为什么要这样设计？

### 4.1 RST

### 4.2 初始序列号

### 5 为什么不需要四次握手？

## 6 总结